function getProjects(){return{active:[{id:"1",name:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nesciunt, autem!"},{id:"2",name:"Lorem ipsum dolor sit amet."},{id:"3",name:"Lorem ipsum dolor sit amet, consectetur adipisicing."},{id:"4",name:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Id quia illum inventore, aliquid. Ducimus, blanditiis alias, vel cumque recusandae dicta!"}],inactive:[],"on-hold":[{id:"5",name:"Lorem ipsum dolor sit amet, consectetur."}],cancled:[]}}jQuery(document).ready(function($){var e={projects:getProjects(),risks:[],init:function(){this.bindEvents()},bindEvents:function(){var e=this;$(document).on("click",".view--risks",function(e){e.preventDefault(),$(this).parents(".project-block").find(".risks").fadeToggle("400"),$(this).toggleClass("showing"),$(this).hasClass("showing")?$(this).text("Hide Risks"):$(this).text("Show Risks")}),$(document).on("click",".project-block--delete",function(e){e.preventDefault(),$(this).parents(".project-block").fadeOut("400").delay("500").remove()}),$("#project--new").submit(function(t){t.preventDefault(),e.createProject(this)}),e.draggableRisks(),e.droppableProjects(),$(".sortable").sortable({cursor:"move"}),$(".status").sortable({connectWith:".sortable"}),$(".status").droppable({accept:".project-block",hoverClass:"outline-state",tolerance:"pointer",drop:function(t,i){i.draggable.hide().remove();var a=$($(this).attr("href"));a.append('<div class="project-block">'+i.draggable.html()+"</div>"),e.droppableProjects(),e.draggableRisks()}})},droppableProjects:function(){var e=this;$(".project-block").droppable({accept:".risk",drop:function(t,i){i.draggable.fadeOut("400").delay("500").remove(),$(this).find(".risks").append('<div class="risk">'+i.draggable.html()+"</div>"),e.draggableRisks()}})},draggableRisks:function(){$(".project-block-unassined .risk").draggable({revert:"invalid"}),$(".project-block .risk").draggable({revert:"invalid"})},createProject:function(e){var t=this,i=$(e).find("#project--name"),a=i.val(),o={id:+new Date,name:a,status:"1"};$.ajax({url:"/management/plan-projects.php",type:"POST",dataType:"json",data:{add_project:a}}).done(function(){console.log("success")}).fail(function(){console.log("error")}),i.val(""),$("#project--add").modal("hide"),t.loadProjects()},loadProjects:function(){var e=this,t=e.projects.active,a=$("#project-template").html();for(i=0,len=t.length,fragment="";i<len;i++)fragment+=a.replace(/\{\{NAME\}\}/,t[i].name).replace(/\{\{PRIORITY\}\}/,t[i].id);$("#active-projects").html(fragment)}};e.init()});